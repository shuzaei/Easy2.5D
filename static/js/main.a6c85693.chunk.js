(this["webpackJsonpeasy2.5d"]=this["webpackJsonpeasy2.5d"]||[]).push([[0],{58:function(e,t,n){"use strict";n.r(t);var s=n(49),r=n(41),a=n(42),i=n(45),o=n(43),c=n(0),l=n.n(c),u=n(9),h=n.n(u),d=n(50),m=n(51),p=n(55),b=n.n(p),j=n(80),g=n(44),f=n(57),O=(n(69),n(6));function v(e){return Object(O.jsx)(d.a,{variant:"contained",color:"primary",onClick:e.onClick,children:Object(O.jsxs)("div",{className:"boxContainer",children:[Object(O.jsx)(b.a,{}),"\u65b0\u898f\u4f5c\u6210"]})})}function C(e,t,n,s){var r=document.createElement("canvas"),a=r.getContext("2d");r.width=s,r.height=s;var i=new Image;i.src=e;var o=i.height/3,c=i.width/3;return a.drawImage(i,n*c,t*o,c,o,0,0,s,s),r.toDataURL()}function S(e){return Object(O.jsx)("button",{className:"square",onClick:e.onClick,children:Object(O.jsx)("div",{className:"pixel",children:e.images.map((function(t,n){return Object(O.jsx)("img",{className:"img",src:C(t.src,Math.floor(t.num/3),t.num%3,e.r),alt:"",width:e.r,height:e.r})}))})})}var x=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"renderSquare",value:function(e,t,n){var s=this;return Object(O.jsx)(S,{name:30*(e*this.props.sizeX+t),images:n,onClick:function(){return s.props.onClick(e,t)},caption:"",r:this.props.sizeOfSquare},e*this.props.sizeX+t)}},{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{children:this.props.data.map((function(t,n){return Object(O.jsx)("div",{className:"canvas-row",children:t.map((function(t,s){return e.renderSquare(n,s,t)}))},n)}))})}}]),n}(l.a.Component),k=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(O.jsx)(v,{onClick:this.props.handleClickOfAddButton})}}]),n}(l.a.Component);function y(e){var t=l.a.useState(null),n=Object(s.a)(t,2),r=n[0],a=n[1],i=l.a.useState(null),o=Object(s.a)(i,2),c=o[0],u=o[1],h=function(){a(null)},m=function(){u(null)};return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)(d.a,{"aria-controls":"palette-set","aria-haspopup":"true",onClick:function(e){a(e.currentTarget)},children:["\u30d1\u30ec\u30c3\u30c8: ",e.colorSets[e.selectColorSetNumber].name]}),Object(O.jsx)(g.a,{id:"palette-set",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:h,children:e.colorSets.map((function(t,n){return Object(O.jsx)(f.a,{onClick:function(){h(),console.log(n),e.setPalette(n)},children:t.name})}))})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)(d.a,{"aria-controls":"palette","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},children:["\u30ab\u30e9\u30fc:",Object(O.jsx)("img",{src:e.colorSets[e.selectColorSetNumber].body[e.selectColorNumber],alt:""})]}),Object(O.jsx)(g.a,{id:"palette",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:m,children:e.colorSets[e.selectColorSetNumber].body.map((function(t,n){return Object(O.jsx)(f.a,{onClick:function(){m(),console.log(n),e.setColor(n)},children:Object(O.jsx)("img",{src:t,alt:""})})}))})]})]})}var N=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={history:[{canvas:w(16,16,0),processed:z(16,16,"img/none.png",4)}],stepNumber:0,sizeX:16,sizeY:16,colorSets:[{name:"default",body:["img/none.png","img/Z.png","img/T.png","img/J.png","img/I.png","img/O.png","img/S.png","img/L.png"],side:["img/none.png","img/Z2.png","img/T2.png","img/J2.png","img/I2.png","img/O2.png","img/S2.png","img/L2.png"],shade:["img/none.png","img/Shade.png","img/Shade.png","img/Shade.png","img/Shade.png","img/Shade.png","img/Shade.png","img/Shade.png"]}],selectColorSetNumber:0,selectColorNumber:1,sizeOfSquare:36,showInitMenu:!1},s}return Object(a.a)(n,[{key:"ShowInitMenu",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(m.a,{required:!0,id:"fileName",label:"\u30d5\u30a1\u30a4\u30eb\u540d"}),Object(O.jsx)(m.a,{required:!0,id:"sizeX",label:"\u30b5\u30a4\u30baX"}),Object(O.jsx)(m.a,{required:!0,id:"sizeY",label:"\u30b5\u30a4\u30baY"})]})}},{key:"handleClickOfAddButton",value:function(){this.setState({showInitMenu:!0})}},{key:"handleClickOfCanvas",value:function(e,t){var n=this.state.history.slice(0,this.state.stepNumber+1),s=n[this.state.stepNumber].canvas;s[e][t]=this.state.selectColorNumber,this.setState({history:n.concat([{canvas:s,processed:this.culcCanvas(s)}]),stepNumber:n.length})}},{key:"setPalette",value:function(e){console.log(e),this.setState({selectColorSetNumber:e})}},{key:"setColor",value:function(e){console.log(e),this.setState({selectColorNumber:e})}},{key:"culcCanvas",value:function(e){for(var t=function(e,t){for(var n=new Array(e),s=0;s<e;s++)n[s]=new Array(t).fill([]);return n}(this.state.sizeY,this.state.sizeX),n=[0,1,1,1,0,-1,-1,-1],s=[1,1,0,-1,-1,-1,0,1],r=0;r<this.state.sizeY;r++)for(var a=0;a<this.state.sizeX;a++){for(var i=[0,0,0,0,0,0,0,0],o=0;o<8;o++){var c=r+n[o],l=a+s[o];0<=c&&c<this.state.sizeY&&0<=l&&l<this.state.sizeX&&(0!==e[c][l]&&(i[o]=1))}0===e[r][a]?(i[4]&&(t[r][a]=t[r][a].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].shade[e[r+n[4]][a+s[4]]],num:2}])),i[5]&&(t[r][a]=t[r][a].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].shade[e[r+n[5]][a+s[5]]],num:8}])),i[6]&&(t[r][a]=t[r][a].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].shade[e[r+n[6]][a+s[6]]],num:6}])),i[2]&&(t[r][a]=t[r][a].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].side[e[r+n[2]][a+s[2]]],num:1}]))):t[r][a]=t[r][a].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].body[e[r][a]],num:5}])}return t}},{key:"render",value:function(){var e=this,t=this.state.history.slice()[this.state.stepNumber];return Object(O.jsxs)("div",{children:[Object(O.jsx)(j.a,{anchor:"top",open:this.state.showInitMenu,onClose:function(){e.setState({showInitMenu:!1})},children:this.ShowInitMenu()}),Object(O.jsx)(k,{handleClickOfAddButton:function(){return e.handleClickOfAddButton()}}),Object(O.jsx)(y,{colorSets:this.state.colorSets,selectColorSetNumber:this.state.selectColorSetNumber,selectColorNumber:this.state.selectColorNumber,setPalette:function(t){return e.setPalette(t)},setColor:function(t){return e.setColor(t)}}),Object(O.jsx)("div",{className:"canvas",children:Object(O.jsx)(x,{className:"layer",data:t.processed,onClick:function(t,n){return e.handleClickOfCanvas(t,n)},sizeX:this.state.sizeX,sizeY:this.state.sizeY,sizeOfSquare:this.state.sizeOfSquare})})]})}}]),n}(l.a.Component);function w(e,t,n){for(var s=new Array(e),r=0;r<e;r++)s[r]=new Array(t).fill(n);return s}function z(e,t,n,s){for(var r=new Array(e),a=0;a<e;a++)r[a]=new Array(t).fill([{src:n,num:4}]);return r}h.a.render(Object(O.jsx)(N,{}),document.querySelector("#app"))},69:function(e,t,n){}},[[58,1,2]]]);
//# sourceMappingURL=main.a6c85693.chunk.js.map