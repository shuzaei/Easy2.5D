(this["webpackJsonpeasy2.5d"]=this["webpackJsonpeasy2.5d"]||[]).push([[0],{65:function(e,t,A){},74:function(e,t,A){"use strict";A.r(t);var a=A(48),s=A(41),n=A(42),o=A(44),r=A(43),i=A(0),c=A.n(i),l=A(9),u=A.n(l),h=A(110),g=A(115),I=A(52),O=A.n(I),d=A(117),C=A(53),b=A(118),S=(A(65),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAJElEQVQ4T2NkoBJgpJI5DKMGEQ7J0TAaDSPCIUBYxWg6IhxGADXlABMacyzVAAAAAElFTkSuQmCC"),p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAOElEQVQ4T2NkoBJgJNWcefPm/U9KSsLQN2oQIiRHw4hwqhpiYQRyLmFPIVRQJYvgspDkvDYCDQIAdI0wE1rCT34AAAAASUVORK5CYII=",f=A(6);function j(e){return Object(f.jsx)(h.a,{variant:"contained",color:"primary",onClick:e.onClick,children:Object(f.jsxs)("div",{className:"boxContainer",children:[Object(f.jsx)(O.a,{}),"\u65b0\u898f\u4f5c\u6210"]})})}function m(e){return Object(i.useEffect)((function(){e.images.forEach((function(t,A){var a=document.getElementById("".concat(e.name,"+").concat(A)),s=a.getContext("2d");a.width=e.r,a.height=e.r;var n=new Image;n.src=t.src,n.onload=function(){var A=n.height/3,a=n.width/3;s.drawImage(n,t.num%3*a,Math.floor(t.num/3)*A,a,A,0,0,e.r,e.r)}}))})),Object(f.jsx)("button",{className:"square",onClick:e.onClick,children:Object(f.jsx)("div",{className:"pixel",children:e.images.map((function(t,A){return Object(f.jsx)("canvas",{id:"".concat(e.name,"+").concat(A),className:"img",width:e.r,height:e.r},A)}))})})}var E=function(e){Object(o.a)(A,e);var t=Object(r.a)(A);function A(){return Object(s.a)(this,A),t.apply(this,arguments)}return Object(n.a)(A,[{key:"renderSquare",value:function(e,t,A){var a=this;return Object(f.jsx)(m,{name:e*this.props.sizeX+t,images:A,onClick:function(){return a.props.onClick(e,t)},caption:"",r:this.props.sizeOfSquare},e*this.props.sizeX+t)}},{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:this.props.data.map((function(t,A){return Object(f.jsx)("div",{className:"canvas-row",children:t.map((function(t,a){return e.renderSquare(A,a,t)}))},A)}))})}}]),A}(c.a.Component),Y=function(e){Object(o.a)(A,e);var t=Object(r.a)(A);function A(){return Object(s.a)(this,A),t.apply(this,arguments)}return Object(n.a)(A,[{key:"render",value:function(){return Object(f.jsx)(j,{onClick:this.props.handleClickOfAddButton})}}]),A}(c.a.Component);function B(e){var t=c.a.useState(null),A=Object(a.a)(t,2),s=A[0],n=A[1],o=c.a.useState(null),r=Object(a.a)(o,2),i=r[0],l=r[1],u=function(){n(null)},g=function(){l(null)};return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)(h.a,{"aria-controls":"palette-set","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},children:["\u30d1\u30ec\u30c3\u30c8: ",e.colorSets[e.selectColorSetNumber].name]}),Object(f.jsx)(C.a,{id:"palette-set",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:u,children:e.colorSets.map((function(t,A){return Object(f.jsx)(b.a,{onClick:function(){u(),e.setPalette(A)},children:t.name},A)}))})]}),Object(f.jsxs)("div",{children:[Object(f.jsxs)(h.a,{"aria-controls":"palette","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},children:["\u30ab\u30e9\u30fc:",Object(f.jsx)("img",{src:e.colorSets[e.selectColorSetNumber].body[e.selectColorNumber],alt:"",width:e.r,height:e.r})]}),Object(f.jsx)(C.a,{id:"palette",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:g,children:e.colorSets[e.selectColorSetNumber].body.map((function(t,A){return Object(f.jsx)(b.a,{onClick:function(){g(),e.setColor(A)},children:Object(f.jsx)("img",{src:t,alt:"",width:e.r,height:e.r})},A)}))})]})]})}var R=function(e){Object(o.a)(A,e);var t=Object(r.a)(A);function A(e){var a;return Object(s.a)(this,A),(a=t.call(this,e)).state={history:[{canvas:Q(16,16,0),processed:v(16,16,S,4)}],stepNumber:0,sizeX:16,sizeY:16,colorSets:[{name:"default",body:[S,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAKUlEQVQ4T2N8KZf8n4EKgHHUIIKhOBpGBIOIYTSMRsOIcAgQVkG1dAQAUYcrdfJHN6MAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAKUlEQVQ4T2Oco77hPwMVAOOoQQRDcTSMCAYRw2gYjYYR4RAgrIJq6QgA/FksF1bPUGcAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAKUlEQVQ4T2O0D9z6n4EKgHHUIIKhOBpGBIOIYTSMRsOIcAgQVkG1dAQAOGso2zThPGcAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAKUlEQVQ4T2NkXvnlPwMVAOOoQQRDcTSMCAYRw2gYjYYR4RAgrIJq6QgAeUkvQRoY1VsAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAKUlEQVQ4T2P8/9r6PwMVAOOoQQRDcTSMCAYRw2gYjYYR4RAgrIJq6QgA3BU4m9Hwo00AAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAKUlEQVQ4T2P0WR/wn4EKgHHUIIKhOBpGBIOIYTSMRsOIcAgQVkG1dAQAZDgpR7uEHjkAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAKUlEQVQ4T2P8P4PhPwMVAOOoQQRDcTSMCAYRw2gYjYYR4RAgrIJq6QgA5nQun9Ecr8wAAAAASUVORK5CYII="],side:[S,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAALElEQVQ4T2NkoBJgpJI5DCPRoA9Jk/6TEn4jMYxICR+Q2tEwIhxio2FEOIwAnUwC9myh55EAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAALElEQVQ4T2NkoBJgpJI5DCPRoF0ZJ/6TEn4jMYxICR+Q2tEwIhxio2FEOIwAsoIC/P5IvaAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAALElEQVQ4T2NkoBJgpJI5DCPRoMq20/9JCb+RGEakhA9I7WgYEQ6x0TAiHEYAPt4C3Lc40/QAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAALElEQVQ4T2NkoBJgpJI5DCPRIP/D3/+TEn4jMYxICR+Q2tEwIhxio2FEOIwAIbwDG2Idr2cAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAALElEQVQ4T2NkoBJgpJI5DCPRoP8fy/6TEn4jMYxICR+Q2tEwIhxio2FEOIwAcksDeFYIfPIAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAALElEQVQ4T2NkoBJgpJI5DCPRoMbjLf9JCb+RGEakhA9I7WgYEQ6x0TAiHEYARmMC3qWskPgAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAALElEQVQ4T2NkoBJgpJI5DCPRoP/bff+TEn4jMYxICR+Q2tEwIhxio2FEOIwADXQDFSnzuycAAAAASUVORK5CYII="],shade:[S,p,p,p,p,p,p,p]}],selectColorSetNumber:0,selectColorNumber:1,sizeOfSquare:36,showInitMenu:!1,tf_n:"",tf_x:"",tf_y:""},a}return Object(n.a)(A,[{key:"ShowInitMenu",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)(g.a,{required:!0,id:"fileName",label:"\u30d5\u30a1\u30a4\u30eb\u540d",value:this.state.tf_n,onChange:function(t,A){e.setState({tf_n:t.target.value})}}),Object(f.jsx)(g.a,{required:!0,id:"sizeX",label:"\u30b5\u30a4\u30baX",value:this.state.tf_x,onChange:function(t,A){e.setState({tf_x:t.target.value})}}),Object(f.jsx)(g.a,{required:!0,id:"sizeY",label:"\u30b5\u30a4\u30baY",value:this.state.tf_y,onChange:function(t,A){e.setState({tf_y:t.target.value})}}),Object(f.jsx)(h.a,{onClick:function(){var t=isNaN(parseInt(e.state.tf_x))?16:parseInt(e.state.tf_x),A=isNaN(parseInt(e.state.tf_y))?16:parseInt(e.state.tf_y);e.setState({showInitMenu:!1,sizeX:t,sizeY:A}),e.setState({history:[{canvas:Q(A,t,0),processed:v(A,t,S,4)}],stepNumber:0})},children:"\u4f5c\u6210"})]})}},{key:"handleClickOfAddButton",value:function(){this.setState({showInitMenu:!0})}},{key:"handleClickOfCanvas",value:function(e,t){var A=this.state.history.slice(0,this.state.stepNumber+1),a=A[this.state.stepNumber].canvas;a[e][t]=this.state.selectColorNumber,this.setState({history:A.concat([{canvas:a,processed:this.culcCanvas(a)}]),stepNumber:A.length})}},{key:"setPalette",value:function(e){this.setState({selectColorSetNumber:e})}},{key:"setColor",value:function(e){this.setState({selectColorNumber:e})}},{key:"culcCanvas",value:function(e,t){for(var A=function(e,t){for(var A=new Array(e),a=0;a<e;a++)A[a]=new Array(t).fill([]);return A}(this.state.sizeY,this.state.sizeX),a=[0,1,1,1,0,-1,-1,-1],s=[1,1,0,-1,-1,-1,0,1],n=0;n<this.state.sizeY;n++)for(var o=0;o<this.state.sizeX;o++){for(var r=[0,0,0,0,0,0,0,0],i=0;i<8;i++){var c=n+a[i],l=o+s[i];0<=c&&c<this.state.sizeY&&0<=l&&l<this.state.sizeX&&(0!==e[c][l]&&(r[i]=1))}0===e[n][o]?(r[4]&&(A[n][o]=A[n][o].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].shade[e[n+a[4]][o+s[4]]],num:2}])),r[5]&&(A[n][o]=A[n][o].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].shade[e[n+a[5]][o+s[5]]],num:8}])),r[6]&&(A[n][o]=A[n][o].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].shade[e[n+a[6]][o+s[6]]],num:6}])),r[2]&&(A[n][o]=A[n][o].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].side[e[n+a[2]][o+s[2]]],num:1}]))):A[n][o]=A[n][o].concat([{src:this.state.colorSets[this.state.selectColorSetNumber].body[e[n][o]],num:5}])}return A}},{key:"render",value:function(){var e=this,t=this.state.history.slice()[this.state.stepNumber];return Object(f.jsxs)("div",{children:[Object(f.jsx)(d.a,{anchor:"top",open:this.state.showInitMenu,onClose:function(){e.setState({showInitMenu:!1})},children:this.ShowInitMenu()}),Object(f.jsx)(Y,{handleClickOfAddButton:function(){return e.handleClickOfAddButton()}}),Object(f.jsx)(B,{colorSets:this.state.colorSets,selectColorSetNumber:this.state.selectColorSetNumber,selectColorNumber:this.state.selectColorNumber,setPalette:function(t){return e.setPalette(t)},setColor:function(t){return e.setColor(t)},r:this.props.sizeOfSquare}),Object(f.jsx)("div",{className:"canvas",children:Object(f.jsx)(E,{className:"layer",data:t.processed,onClick:function(t,A){return e.handleClickOfCanvas(t,A)},sizeX:this.state.sizeX,sizeY:this.state.sizeY,sizeOfSquare:this.state.sizeOfSquare})})]})}}]),A}(c.a.Component);function Q(e,t,A){for(var a=new Array(e),s=0;s<e;s++)a[s]=new Array(t).fill(A);return a}function v(e,t,A,a){for(var s=new Array(e),n=0;n<e;n++)s[n]=new Array(t).fill([{src:A,num:a}]);return s}u.a.render(Object(f.jsx)(R,{}),document.querySelector("#app"))}},[[74,1,2]]]);
//# sourceMappingURL=main.f7dbb047.chunk.js.map